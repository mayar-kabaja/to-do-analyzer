<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart To-Do Analyzer</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0c0c10;
            --surface: #13131a;
            --card: #1a1a24;
            --border: #2a2a38;
            --border-bright: #3d3d55;
            --accent: #7b61ff;
            --accent-soft: rgba(123, 97, 255, 0.18);
            --accent-glow: rgba(123, 97, 255, 0.35);
            --text: #e8e8f0;
            --muted: #6b6b88;
            --dim: #3a3a52;
            --high: #ff5252;
            --med: #ffb74d;
            --low: #69f0ae;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--bg);
            min-height: 100vh;
            color: var(--text);
            overflow: hidden;
        }

        /* â”€â”€ TOP BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .topbar {
            position: relative;
            z-index: 100;
            background: rgba(12,12,16,0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 0 28px;
            height: 58px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .topbar-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            font-weight: 800;
            letter-spacing: -0.3px;
        }

        .logo-dot {
            width: 9px; height: 9px;
            border-radius: 50%;
            background: var(--accent);
            box-shadow: 0 0 8px var(--accent);
            animation: pulse 2.5s infinite;
        }

        @keyframes pulse {
            0%,100% { opacity:1; transform:scale(1); }
            50% { opacity:0.5; transform:scale(0.75); }
        }

        .topbar-date {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.75rem;
            color: var(--muted);
        }

        /* â”€â”€ 3-COLUMN WORKSPACE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .workspace {
            display: grid;
            grid-template-columns: 265px 1fr 320px;
            height: calc(100vh - 58px);
        }

        .col-left, .col-center, .col-right {
            overflow-y: auto;
        }

        .col-left {
            border-right: 1px solid var(--border);
            padding: 24px 20px;
            display: flex;
            flex-direction: column;
            gap: 26px;
        }

        .col-center {
            padding: 0;
            background: var(--bg);
            position: relative;
        }

        .col-right {
            border-left: 1px solid var(--border);
            background: var(--surface);
            padding: 24px 20px;
        }

        ::-webkit-scrollbar { width: 3px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--dim); border-radius: 4px; }

        /* â”€â”€ SECTION LABEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .sec-label {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.65rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: var(--muted);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .sec-label::after {
            content: ''; flex: 1; height: 1px; background: var(--border);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LEFT COLUMN
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .stat-strip {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .stat-chip {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 14px 12px;
            transition: border-color 0.2s;
            cursor: default;
        }
        .stat-chip:hover { border-color: var(--border-bright); }

        .stat-num {
            font-size: 1.75rem;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 4px;
        }
        .stat-num.total   { color: var(--accent); }
        .stat-num.today   { color: var(--low); }
        .stat-num.week    { color: var(--med); }
        .stat-num.overdue { color: var(--high); }

        .stat-lbl {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.68rem;
            color: var(--muted);
        }

        .priority-list { display: flex; flex-direction: column; gap: 7px; }

        .priority-row {
            display: flex; align-items: center; gap: 10px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 9px;
            padding: 11px 13px;
            transition: all 0.2s;
            cursor: default;
        }
        .priority-row:hover { border-color: var(--border-bright); transform: translateX(2px); }

        .p-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
        .p-dot.h { background: var(--high); box-shadow: 0 0 5px var(--high); }
        .p-dot.m { background: var(--med);  box-shadow: 0 0 5px var(--med); }
        .p-dot.l { background: var(--low);  box-shadow: 0 0 5px var(--low); }

        .p-name { flex: 1; font-size: 0.85rem; font-weight: 600; }

        .p-bar-wrap { width: 54px; height: 3px; background: var(--border); border-radius: 3px; overflow: hidden; }
        .p-bar { height: 100%; border-radius: 3px; transition: width 0.7s ease; }
        .p-bar.h { background: var(--high); }
        .p-bar.m { background: var(--med); }
        .p-bar.l { background: var(--low); }

        .p-num {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.78rem;
            color: var(--muted);
            min-width: 16px;
            text-align: right;
        }

        .cat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }

        .cat-chip {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 11px;
            display: flex; align-items: center; justify-content: space-between;
            transition: all 0.2s; cursor: default;
        }
        .cat-chip:hover { border-color: var(--accent); background: var(--accent-soft); }

        .cat-name { font-size: 0.76rem; font-weight: 600; }
        .cat-count {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.7rem;
            color: var(--muted);
            background: var(--border);
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CENTER COLUMN â€” THE HERO
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .center-inner {
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Ambient glow behind the panel */
        .center-glow {
            position: absolute;
            top: 60px; left: 50%;
            transform: translateX(-50%);
            width: 500px; height: 300px;
            background: radial-gradient(ellipse, rgba(123,97,255,0.12) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        /* Header strip */
        .center-header {
            position: relative;
            z-index: 1;
            padding: 32px 36px 0;
        }

        .center-eyebrow {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.68rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--accent);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .center-eyebrow::before {
            content: '';
            width: 20px; height: 1px;
            background: var(--accent);
        }

        .center-title {
            font-size: 1.9rem;
            font-weight: 800;
            letter-spacing: -0.8px;
            line-height: 1.1;
            margin-bottom: 4px;
        }
        .center-title span {
            background: linear-gradient(135deg, #a78bfa, #7b61ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .center-sub {
            font-size: 0.82rem;
            color: var(--muted);
            margin-bottom: 28px;
        }

        /* Main panel */
        .center-panel {
            position: relative;
            z-index: 1;
            flex: 1;
            padding: 0 36px 32px;
            display: flex;
            flex-direction: column;
            gap: 16px;
            overflow-y: auto;
        }

        /* â”€â”€ TEXTAREA CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .textarea-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 18px;
            overflow: hidden;
            transition: border-color 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 24px rgba(0,0,0,0.3);
        }

        .textarea-card:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-soft), 0 8px 40px rgba(123,97,255,0.15);
        }

        /* Top bar of the textarea card */
        .tc-topbar {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            border-bottom: 1px solid var(--border);
            background: rgba(255,255,255,0.02);
        }

        .tc-dots {
            display: flex; gap: 6px;
        }
        .tc-dot {
            width: 9px; height: 9px; border-radius: 50%;
        }
        .tc-dot:nth-child(1) { background: #ff5f57; }
        .tc-dot:nth-child(2) { background: #febc2e; }
        .tc-dot:nth-child(3) { background: #28c840; }

        .tc-label {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.72rem;
            color: var(--muted);
            flex: 1;
        }

        .tc-hint {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.68rem;
            color: var(--dim);
            background: var(--border);
            padding: 3px 8px;
            border-radius: 5px;
        }

        /* The textarea itself */
        .main-textarea {
            width: 100%;
            min-height: 360px;
            background: transparent;
            border: none;
            outline: none;
            padding: 22px 24px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
            color: var(--text);
            resize: none;
            line-height: 2.1;
            caret-color: var(--accent);
        }

        .main-textarea::placeholder {
            color: var(--dim);
        }

        /* Line numbers effect */
        .tc-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 18px;
            border-top: 1px solid var(--border);
            background: rgba(255,255,255,0.01);
        }

        .tc-footer-left {
            display: flex;
            gap: 16px;
        }

        .tc-stat {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.8rem;
            color: var(--muted);
            font-weight: 500;
        }

        .tc-stat span {
            color: var(--text);
            font-weight: 700;
        }

        /* â”€â”€ ACTION ROW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .action-row {
            display: flex;
            gap: 10px;
        }

        .btn-clear {
            padding: 14px 22px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 12px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--muted);
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .btn-clear:hover {
            border-color: var(--border-bright);
            color: var(--text);
        }

        .btn-analyze {
            padding: 14px 22px;
            background: var(--accent);
            border: none;
            border-radius: 12px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            color: #fff;
            cursor: pointer;
            /* letter-spacing: 0.02em; */
            transition: all 0.25s;
            position: relative;
            overflow: hidden;
        }

        .btn-analyze::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 60%);
            opacity: 0;
            transition: opacity 0.2s;
        }
        .btn-analyze:hover::after { opacity: 1; }
        .btn-analyze:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--accent-glow);
        }
        .btn-analyze:active { transform: translateY(0); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RIGHT COLUMN
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .right-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 18px;
        }

        .right-title { font-size: 1.05rem; font-weight: 800; }

        .r-badge {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.72rem;
            background: var(--accent);
            color: #fff;
            padding: 3px 9px;
            border-radius: 20px;
        }

        .filter-tabs {
            display: flex;
            gap: 4px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 4px;
            margin-bottom: 18px;
        }

        .f-tab {
            flex: 1;
            padding: 7px 6px;
            border: none;
            border-radius: 7px;
            background: transparent;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.73rem;
            font-weight: 700;
            color: var(--muted);
            cursor: pointer;
            transition: all 0.2s;
        }
        .f-tab.active { background: var(--accent); color: #fff; }
        .f-tab:hover:not(.active) { background: var(--border); color: var(--text); }

        /* Task card */
        .task-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 14px 15px;
            margin-bottom: 9px;
            transition: all 0.25s;
            cursor: default;
            position: relative;
            overflow: hidden;
        }
        .task-card::before {
            content: '';
            position: absolute;
            left: 0; top: 0; bottom: 0;
            width: 3px;
        }
        .task-card.ph::before { background: var(--high); }
        .task-card.pm::before { background: var(--med); }
        .task-card.pl::before { background: var(--low); }

        .task-card:hover {
            border-color: var(--border-bright);
            transform: translateX(-3px);
            background: #1e1e2c;
        }

        .tc-top {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 9px;
        }

        .tc-title {
            font-size: 0.88rem;
            font-weight: 700;
            line-height: 1.4;
            flex: 1;
            padding-right: 8px;
        }

        .tc-actions {
            display: flex; gap: 4px;
            opacity: 0; transition: opacity 0.15s;
        }
        .task-card:hover .tc-actions { opacity: 1; }

        .act-btn {
            width: 24px; height: 24px;
            border: none; border-radius: 6px;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.75rem;
            transition: transform 0.15s;
        }
        .act-done { background: rgba(105,240,174,0.15); color: var(--low); }
        .act-del  { background: rgba(255,82,82,0.15);   color: var(--high); }
        .act-btn:hover { transform: scale(1.15); }

        .tc-tags { display: flex; gap: 5px; flex-wrap: wrap; }

        .ttag {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.67rem;
            padding: 3px 7px;
            border-radius: 5px;
        }
        .ttag.ph { background: rgba(255,82,82,0.12); color: #ff7070; }
        .ttag.pm { background: rgba(255,183,77,0.12); color: #ffb74d; }
        .ttag.pl { background: rgba(105,240,174,0.12); color: var(--low); }
        .ttag.cat { background: rgba(123,97,255,0.12); color: #a78bfa; }
        .ttag.date { background: rgba(255,255,255,0.05); color: var(--muted); }

        .task-card.done .tc-title {
            text-decoration: line-through;
            opacity: 0.35;
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: var(--muted);
        }
        .empty-state .es-icon { font-size: 2.2rem; margin-bottom: 12px; opacity: 0.3; }
        .empty-state p {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.78rem;
            line-height: 1.6;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BOTTOM NAV (tablet & mobile only)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .bottom-nav {
            display: none;
        }

        @media (max-width: 900px) {
            .bottom-nav {
                display: flex;
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                height: 56px;
                padding-bottom: env(safe-area-inset-bottom, 0);
                background: var(--surface);
                border-top: 1px solid var(--border);
                z-index: 100;
                align-items: center;
                justify-content: space-around;
            }
            .bottom-nav-btn {
                flex: 1;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 2px;
                padding: 8px 4px;
                background: none;
                border: none;
                font-family: 'Montserrat', sans-serif;
                font-size: 0.7rem;
                font-weight: 600;
                color: var(--muted);
                cursor: pointer;
                transition: color 0.2s;
                -webkit-tap-highlight-color: transparent;
            }
            .bottom-nav-btn .bn-icon { font-size: 1.25rem; line-height: 1; }
            .bottom-nav-btn.active { color: var(--accent); }
            .bottom-nav-btn:hover:not(.active) { color: var(--text); }

            .workspace {
                grid-template-columns: 1fr;
                height: auto;
                min-height: calc(100vh - 58px - 56px - env(safe-area-inset-bottom, 0));
                padding-bottom: calc(56px + env(safe-area-inset-bottom, 0));
            }
            .col-left, .col-center, .col-right {
                display: none !important;
            }
            .workspace[data-mobile-view="stats"] .col-left,
            .workspace[data-mobile-view="add"] .col-center,
            .workspace[data-mobile-view="tasks"] .col-right {
                display: flex !important;
            }
            .workspace[data-mobile-view="add"] .col-center {
                display: block !important;
            }
            .workspace[data-mobile-view="tasks"] .col-right {
                display: block !important;
            }
        }
    </style>
</head>
<body>

<!-- TOP BAR -->
<header class="topbar">
    <div class="topbar-logo">
        <div class="logo-dot"></div>
        Smart To-Do
    </div>
    <div class="topbar-date" id="topbarDate"></div>
</header>

<div class="workspace">

    <!-- â•â•â•â•â•â•â•â• LEFT â•â•â•â•â•â•â•â• -->
    <aside class="col-left">

        <div>
            <div class="sec-label">Overview</div>
            <div class="stat-strip">
                <div class="stat-chip"><div class="stat-num total" id="sTotal">0</div><div class="stat-lbl">Total</div></div>
                <div class="stat-chip"><div class="stat-num today" id="sToday">0</div><div class="stat-lbl">Due Today</div></div>
                <div class="stat-chip"><div class="stat-num week"  id="sWeek">0</div><div class="stat-lbl">This Week</div></div>
                <div class="stat-chip"><div class="stat-num overdue" id="sOver">0</div><div class="stat-lbl">Overdue</div></div>
            </div>
        </div>

        <div>
            <div class="sec-label">Priority</div>
            <div class="priority-list">
                <div class="priority-row">
                    <div class="p-dot h"></div>
                    <span class="p-name">High</span>
                    <div class="p-bar-wrap"><div class="p-bar h" id="bH" style="width:0%"></div></div>
                    <span class="p-num" id="nH">0</span>
                </div>
                <div class="priority-row">
                    <div class="p-dot m"></div>
                    <span class="p-name">Medium</span>
                    <div class="p-bar-wrap"><div class="p-bar m" id="bM" style="width:0%"></div></div>
                    <span class="p-num" id="nM">0</span>
                </div>
                <div class="priority-row">
                    <div class="p-dot l"></div>
                    <span class="p-name">Low</span>
                    <div class="p-bar-wrap"><div class="p-bar l" id="bL" style="width:0%"></div></div>
                    <span class="p-num" id="nL">0</span>
                </div>
            </div>
        </div>

        <div>
            <div class="sec-label">Categories</div>
            <div class="cat-grid">
                <div class="cat-chip"><span class="cat-name">ğŸ’¼ Work</span><span class="cat-count" id="cW">0</span></div>
                <div class="cat-chip"><span class="cat-name">ğŸ  Personal</span><span class="cat-count" id="cP">0</span></div>
                <div class="cat-chip"><span class="cat-name">ğŸ’ª Health</span><span class="cat-count" id="cH">0</span></div>
                <div class="cat-chip"><span class="cat-name">ğŸ“š Learning</span><span class="cat-count" id="cL">0</span></div>
                <div class="cat-chip"><span class="cat-name">ğŸ’° Finance</span><span class="cat-count" id="cF">0</span></div>
                <div class="cat-chip"><span class="cat-name">ğŸ¯ Other</span><span class="cat-count" id="cO">0</span></div>
            </div>
        </div>

    </aside>

    <!-- â•â•â•â•â•â•â•â• CENTER â•â•â•â•â•â•â•â• -->
    <main class="col-center">
        <div class="center-inner">
            <div class="center-glow"></div>

            <div class="center-header">
                <div class="center-eyebrow">Task Input</div>
                <div class="center-title">Add Your <span>Tasks</span></div>
                <div class="center-sub">Paste a list â€” AI will detect priorities &amp; categories automatically</div>
            </div>

            <div class="center-panel">

                <!-- Main textarea card â€” full height -->
                <div class="textarea-card">
                    <div class="tc-topbar">
                        <div class="tc-dots">
                            <div class="tc-dot"></div>
                            <div class="tc-dot"></div>
                            <div class="tc-dot"></div>
                        </div>
                        <span class="tc-label">tasks.txt</span>
                    </div>

                    <textarea class="main-textarea" id="bulkInput"
                        placeholder="- Finish project report by Friday&#10;- Call dentist tomorrow&#10;- Buy groceries&#10;- Weekly team meeting on Monday at 2 PM&#10;- Complete Python tutorial"></textarea>

                    <div class="tc-footer">
                        <div class="tc-footer-left">
                            <span class="tc-stat">lines <span id="lineCount">0</span></span>
                            <span class="tc-stat">chars <span id="charCount">0</span></span>
                        </div>
                    </div>
                </div>

                <!-- Actions â€” just the two buttons -->
                <div class="action-row">
                    <button class="btn-clear" onclick="clearAll()">ğŸ—‘ï¸ Clear</button>
                    <button class="btn-analyze" onclick="analyzeBulk()">Analyze Tasks</button>
                </div>

            </div>
        </div>
    </main>

    <!-- â•â•â•â•â•â•â•â• RIGHT â•â•â•â•â•â•â•â• -->
    <aside class="col-right">
        <div class="right-header">
            <div class="right-title">Your Tasks</div>
            <div class="r-badge" id="rBadge">0</div>
        </div>

        <div class="filter-tabs">
            <button class="f-tab active" onclick="setFilter('all',this)">All</button>
            <button class="f-tab" onclick="setFilter('high',this)">High</button>
            <button class="f-tab" onclick="setFilter('active',this)">Active</button>
            <button class="f-tab" onclick="setFilter('done',this)">Done</button>
        </div>

        <div id="taskList">
            <div class="empty-state">
                <div class="es-icon">ğŸ“‹</div>
                <p>No tasks yet.<br>Add one using the<br>center panel.</p>
            </div>
        </div>
    </aside>
</div>

<nav class="bottom-nav" id="bottomNav" aria-label="Main">
    <button type="button" class="bottom-nav-btn" data-mobile-tab="stats" aria-label="Stats">
        <span class="bn-icon">ğŸ“Š</span>
        <span>Stats</span>
    </button>
    <button type="button" class="bottom-nav-btn active" data-mobile-tab="add" aria-label="Add Tasks">
        <span class="bn-icon">âœï¸</span>
        <span>Add Tasks</span>
    </button>
    <button type="button" class="bottom-nav-btn" data-mobile-tab="tasks" aria-label="Tasks">
        <span class="bn-icon">ğŸ“‹</span>
        <span>Tasks</span>
    </button>
</nav>

<script>
    // â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let tasks = [], nextId = 1, currentFilter = 'all';

    // â”€â”€ DATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('topbarDate').textContent = new Date().toLocaleDateString('en-US',{
        weekday:'long', month:'short', day:'numeric', year:'numeric'
    });

    // â”€â”€ BOTTOM NAV (tablet & mobile) â”€â”€â”€â”€â”€â”€â”€
    (function() {
        var ws = document.querySelector('.workspace');
        var nav = document.getElementById('bottomNav');
        if (!ws || !nav) return;
        ws.setAttribute('data-mobile-view', 'add');
        nav.querySelectorAll('.bottom-nav-btn').forEach(function(btn) {
            btn.addEventListener('click', function() {
                var tab = this.getAttribute('data-mobile-tab');
                ws.setAttribute('data-mobile-view', tab);
                nav.querySelectorAll('.bottom-nav-btn').forEach(function(b) { b.classList.remove('active'); });
                this.classList.add('active');
            });
        });
    })();

    // â”€â”€ TEXTAREA COUNTERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const bulkEl = document.getElementById('bulkInput');
    bulkEl.addEventListener('input', () => {
        const val = bulkEl.value;
        const lines = val.split('\n').filter(l => l.trim()).length;
        document.getElementById('lineCount').textContent = lines;
        document.getElementById('charCount').textContent = val.length;
        const hint = document.getElementById('detectHint');
        if (lines > 0) { hint.style.opacity = '1'; }
        else { hint.style.opacity = '0'; }
    });

    // â”€â”€ ANALYZE BULK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function analyzeBulk() {
        const raw = bulkEl.value;

        const lines = raw.split('\n')
            .map(l => l.replace(/^[-â€¢*\d.]\s*/,'').trim())
            .filter(Boolean);

        lines.forEach(line => {
            let p = inferPriority(line);
            let c = inferCategory(line);
            pushTask(line, p, c, '');
        });

        bulkEl.value = '';
        document.getElementById('lineCount').textContent = '0';
        document.getElementById('charCount').textContent = '0';
        document.getElementById('detectHint').style.opacity = '0';
        render();
    }

    function inferPriority(line) {
        if (/urgent|asap|critical|today|deadline|report|meeting|presentation|client/i.test(line)) return 'high';
        if (/optional|someday|maybe|weekend|eventually|later|low|nice/i.test(line)) return 'low';
        return 'medium';
    }

    function inferCategory(line) {
        if (/meeting|report|client|email|project|work|office|present|deliver|sprint/i.test(line)) return 'Work';
        if (/buy|groceri|home|clean|cook|shop|family|house|fix|repair/i.test(line)) return 'Personal';
        if (/doctor|dentist|gym|exercise|health|medicine|workout|run|diet/i.test(line)) return 'Health';
        if (/study|learn|read|course|tutorial|book|class|research|practice/i.test(line)) return 'Learning';
        if (/pay|bank|tax|budget|invoice|finance|bill|subscription|money/i.test(line)) return 'Finance';
        return 'Other';
    }

    function clearAll() {
        bulkEl.value = '';
        document.getElementById('lineCount').textContent = '0';
        document.getElementById('charCount').textContent = '0';
        document.getElementById('detectHint').style.opacity = '0';
    }

    function pushTask(title, priority, category, deadline) {
        tasks.push({ id: nextId++, title, priority, category, deadline, done: false });
    }

    // â”€â”€ FILTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function setFilter(f, btn) {
        currentFilter = f;
        document.querySelectorAll('.f-tab').forEach(t => t.classList.remove('active'));
        btn.classList.add('active');
        render();
    }

    function toggleDone(id) {
        const t = tasks.find(t => t.id === id);
        if (t) t.done = !t.done;
        render();
    }

    function deleteTask(id) {
        tasks = tasks.filter(t => t.id !== id);
        render();
    }

    // â”€â”€ RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function render() { renderTasks(); renderStats(); }

    function renderTasks() {
        const list = document.getElementById('taskList');
        document.getElementById('rBadge').textContent = tasks.length;

        const visible = tasks.filter(t => {
            if (currentFilter === 'all')    return true;
            if (currentFilter === 'done')   return t.done;
            if (currentFilter === 'active') return !t.done;
            if (currentFilter === 'high')   return t.priority === 'high';
            return true;
        });

        if (!visible.length) {
            list.innerHTML = `<div class="empty-state"><div class="es-icon">ğŸ“‹</div><p>No tasks here.<br>Add one using the<br>center panel.</p></div>`;
            return;
        }

        const pcls = { high:'ph', medium:'pm', low:'pl' };
        list.innerHTML = visible.map(t => {
            const dl = t.deadline ? new Date(t.deadline + 'T00:00:00').toLocaleDateString('en-US',{month:'short',day:'numeric'}) : '';
            return `
            <div class="task-card ${pcls[t.priority]} ${t.done?'done':''}">
                <div class="tc-top">
                    <div class="tc-title">${esc(t.title)}</div>
                    <div class="tc-actions">
                        <button class="act-btn act-done" onclick="toggleDone(${t.id})" title="Complete">âœ“</button>
                        <button class="act-btn act-del"  onclick="deleteTask(${t.id})" title="Delete">âœ•</button>
                    </div>
                </div>
                <div class="tc-tags">
                    <span class="ttag ${pcls[t.priority]}">${t.priority}</span>
                    <span class="ttag cat">${catEmoji(t.category)} ${t.category}</span>
                    ${dl ? `<span class="ttag date">ğŸ“… ${dl}</span>` : ''}
                </div>
            </div>`;
        }).join('');
    }

    function renderStats() {
        const total = tasks.length;
        const high  = tasks.filter(t => t.priority === 'high').length;
        const med   = tasks.filter(t => t.priority === 'medium').length;
        const low   = tasks.filter(t => t.priority === 'low').length;
        const done  = tasks.filter(t => t.done).length;

        const todayStr = new Date().toISOString().split('T')[0];
        const today = tasks.filter(t => t.deadline === todayStr).length;

        const now = new Date(); const end7 = new Date(); end7.setDate(now.getDate()+7);
        const week = tasks.filter(t => { if (!t.deadline) return false; const d=new Date(t.deadline+'T00:00:00'); return d>=now&&d<=end7; }).length;
        const over = tasks.filter(t => { if (!t.deadline||t.done) return false; return new Date(t.deadline+'T00:00:00')<now; }).length;

        document.getElementById('sTotal').textContent = total;
        document.getElementById('sToday').textContent = today;
        document.getElementById('sWeek').textContent  = week;
        document.getElementById('sOver').textContent  = over;
        document.getElementById('nH').textContent = high;
        document.getElementById('nM').textContent = med;
        document.getElementById('nL').textContent = low;

        const mx = Math.max(high,med,low,1);
        document.getElementById('bH').style.width = (high/mx*100)+'%';
        document.getElementById('bM').style.width = (med/mx*100)+'%';
        document.getElementById('bL').style.width = (low/mx*100)+'%';

        const cats = { Work:0, Personal:0, Health:0, Learning:0, Finance:0, Other:0 };
        tasks.forEach(t => { if (cats[t.category]!==undefined) cats[t.category]++; });
        document.getElementById('cW').textContent = cats.Work;
        document.getElementById('cP').textContent = cats.Personal;
        document.getElementById('cH').textContent = cats.Health;
        document.getElementById('cL').textContent = cats.Learning;
        document.getElementById('cF').textContent = cats.Finance;
        document.getElementById('cO').textContent = cats.Other;
    }

    function catEmoji(c) {
        return {Work:'ğŸ’¼',Personal:'ğŸ ',Health:'ğŸ’ª',Learning:'ğŸ“š',Finance:'ğŸ’°',Other:'ğŸ¯'}[c]||'ğŸ¯';
    }
    function esc(s) {
        return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    }

    render();
</script>
</body>
</html>